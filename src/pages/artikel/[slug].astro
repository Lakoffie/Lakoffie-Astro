---
// src/pages/artikel/[slug].astro
import MainLayout from '../../layouts/MainLayout.astro';
import { daftarArtikel } from '../../data/artikel.ts'; 
import '../../styles/artikel.css';

export async function getStaticPaths() {
  return daftarArtikel.map((art, index) => {
    return {
      params: { slug: art.slug },
      props: { 
        art, 
        prev: daftarArtikel[index - 1] || null, 
        next: daftarArtikel[index + 1] || null 
      },
    };
  });
}

const { art, prev, next } = Astro.props;
---

<MainLayout title={art.judul}>
  <article class="single-post">
    <div class="container-small">
      <header class="post-header">
        <span class="category-badge">{art.kategori}</span>
        <h1>{art.judul}</h1>
        <p class="date">Diterbitkan pada {art.tanggal}</p>
      </header>
      
      <div class="image-wrapper">
        <img src={art.image} alt={art.judul} class="featured-image" />
      </div>
      
      <div class="post-body">
        {art.konten}
      </div>

      <div class="article-hook">
        <h3>Nikmati Kopi Murni di Rumah</h3>
        <p>{art.ctaText || "Tertarik mencoba sensasi kopi yang kami ceritakan di atas?"}</p>
        <a href="https://wa.me/6285175285640" class="btn-wa-action">
           Pesan Lakoffie Sekarang
        </a>
      </div>

      <nav class="post-nav">
        <div class="nav-box">
          {prev ? (
            <a href={`/artikel/${prev.slug}`} class="nav-item">
              <span>← Sebelumnya</span>
              <p>{prev.judul}</p>
            </a>
          ) : (
            <div class="empty-nav"></div>
          )}

          {next ? (
            <a href={`/artikel/${next.slug}`} class="nav-item next">
              <span>Selanjutnya →</span>
              <p>{next.judul}</p>
            </a>
          ) : (
            <div class="empty-nav"></div>
          )}
        </div>
        
        <div class="footer-nav">
          <a href="/artikel" class="back-home">Kembali ke Daftar Artikel</a>
        </div>
      </nav>
    </div>
  </article>
</MainLayout>
